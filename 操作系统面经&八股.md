# 操作系统面经&八股

------

### 进程间通信有哪些？

进程间通信的方式有多种，包括：

1. **管道（Pipe）**：单向通信，适用于有亲缘关系的进程（父子进程）之间通信。

2. - 优点：简单易用，适用于单向通信。
   - 缺点：只能在有亲缘关系的进程之间使用，且只能实现单向通信。

3. **命名管道（Named Pipe）**：允许无亲缘关系的进程间进行通信。

4. - 优点：允许无亲缘关系的进程进行通信。
   - 缺点：只能实现单向通信。

5. **消息队列（Message Queue）**：实现进程间的异步通信，通过消息缓冲区传递数据。

6. - 优点：支持异步通信，可以实现多对多通信。
   - 缺点：复杂度较高，需要处理消息的发送和接收。

7. **共享内存（Shared Memory）**：多个进程共享同一块内存区域，实现高效的数据交换。

8. - 优点：高效，适合大数据量的共享。
   - 缺点：需要处理同步和互斥问题，可能引起数据一致性和安全性问题。

9. **信号量（Semaphore）**：用于进程间的同步和互斥控制。

10. - 优点：可以实现进程间的同步和互斥。
    - 缺点：复杂度较高，需要处理信号量的管理。

11. **套接字（Socket）**：适用于不同主机间的进程通信，可实现网络通信。

12. - 优点：跨主机通信，支持多种通信协议。
    - 缺点：相比于其他方式，套接字通信开销较大。

### 线程间通信知道哪些？

在Linux系统中，线程间通信的方式包括：

- **互斥锁（Mutex）**：线程可以使用互斥锁来保护共享资源，确保同时只有一个线程可以访问该资源。
- **条件变量**：线程可以使用条件变量来等待特定条件的发生，以实现线程间的协调和通知。
- **信号量**：线程可以使用信号量来控制对共享资源的访问，实现线程间的同步和互斥。
- **读写锁**：允许多个线程同时读取共享资源，但只允许一个线程写入共享资源。



### 虚拟内存是什么？有什么作用？

如果没有虚拟内存，程序读写的地址是物理地址的话，可能会出现物理地址冲突的问题，比如，第一个程序在 2000 的位置写入一个新的值，将会擦掉第二个程序存放在相同位置上的所有内容。

为了解决这个问题，就引出了虚拟内存，操作系统为每个进程分配独立的一套「**虚拟地址**」，人人都有，大家自己玩自己的地址就行，互不干涉。但是有个前提每个进程都不能访问物理地址，至于虚拟地址最终怎么落到物理内存里，对进程来说是透明的，操作系统已经把这些都安排的明明白白了。

![图片](https://mmbiz.qpic.cn/sz_mmbiz_png/J0g14CUwaZfao8qtpmKRfSDiaXDJQjw7icETicicgEWxAvkqiaDnTwVh6sfD0PHoa9Vibg4wYk45Q8ptiaFeNbjWjaQRQ/640?wx_fmt=png&from=appmsg&wxfrom=5&wx_lazy=1&wx_co=1)进程的中间层

**操作系统会提供一种机制，将不同进程的虚拟地址和不同内存的物理地址映射起来。**

如果程序要访问虚拟地址的时候，由操作系统转换成不同的物理地址，这样不同的进程运行的时候，写入的是不同的物理地址，这样就不会冲突了。

最后，说下虚拟内存有什么作用？

- 第一，虚拟内存可以使得进程对运行内存超过物理内存大小，因为程序运行符合局部性原理，CPU 访问内存会有很明显的重复访问的倾向性，对于那些没有被经常使用到的内存，我们可以把它换出到物理内存之外，比如硬盘上的 swap 区域。
- 第二，由于每个进程都有自己的页表，所以每个进程的虚拟内存空间就是相互独立的。进程也没有办法访问其他进程的页表，所以这些页表是私有的，这就解决了多进程之间地址冲突的问题。



### 软连接和硬连接有什么区别？

**软连接**实际上是一个指向目标文件的路径的符号链接，类似于Windows系统中的快捷方式，创建软连接不会占用目标文件的inode节点，只是简单地指向目标文件的路径。删除原始文件后，软连接仍然存在，但指向的目标文件失效，称为"悬空链接"。软链接可以跨文件系统创建软连接。

**硬连接**是指多个文件实际上指向同一个inode节点，即多个文件共享同一块数据块。创建硬连接会增加目标文件的链接计数，删除任何一个硬连接并不会影响其他硬连接指向的文件数据。只能在同一文件系统内创建硬连接。



### 死锁条件是什么？

死锁只有**同时满足**以下四个条件才会发生：

- 互斥条件：是指**多个线程不能同时使用同一个资源**。
- 持有并等待条件：指当线程 A 已经持有了资源 1，又想申请资源 2，而资源 2 已经被线程 C 持有了，所以线程 A 就会处于等待状态，但是**线程 A 在等待资源 2 的同时并不会释放自己已经持有的资源 1**。
- 不可剥夺条件：指当线程已经持有了资源 ，**在自己使用完之前不能被其他线程获取**，线程 B 如果也想使用此资源，则只能在线程 A 使用完并释放后才能获取。
- 环路等待条件：指的是在死锁发生的时候，**两个线程获取资源的顺序构成了环形链**。